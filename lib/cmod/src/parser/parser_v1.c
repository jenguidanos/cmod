#include "parser_v1.h"

/*
.########.....###.....######..##....##.########.########
.##.....##...##.##...##....##.##...##..##..........##...
.##.....##..##...##..##.......##..##...##..........##...
.########..##.....##.##.......#####....######......##...
.##........#########.##.......##..##...##..........##...
.##........##.....##.##....##.##...##..##..........##...
.##........##.....##..######..##....##.########....##...
*/

pkt p1_data[65] = {0};
CModPacket p1_packet;

void p1_setLocation(float lat, float lon) {
  p1_packet.lat = lat;
  p1_packet.lon = lon;
}

/*
.####.########.....###....########...######..########.########.
..##..##.....##...##.##...##.....##.##....##.##.......##.....##
..##..##.....##..##...##..##.....##.##.......##.......##.....##
..##..########..##.....##.########...######..######...########.
..##..##........#########.##...##.........##.##.......##...##..
..##..##........##.....##.##....##..##....##.##.......##....##.
.####.##........##.....##.##.....##..######..########.##.....##
*/

struct iParser parser1 = {.packet = &p1_packet,
                          .data = p1_data,
                          .init = p1_init,
                          .serialize = p1_serialize,
                          .deserialize = p1_deserialize};

void p1_init() { p1_packet.setLocation = &p1_setLocation; }

pkt* p1_serialize(CModPacket* packet) { return p1_data; }

CModPacket* p1_deserialize(pkt data) { return &p1_packet; }
